<div class="row justify-content-center">
    <div class="card border-primary col-10 m-3">
      <div class="card-body">
        <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
            <jhi-alert-error></jhi-alert-error>
            <div class="form-group" [hidden]="true">
                <label for="id" jhiTranslate="global.field.id">ID</label>
                <input type="text" class="form-control" id="id" name="id" formControlName="id" readonly />
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.title" for="field_title">Title</label>
                <input type="text" class="form-control col-sm-10" name="title" id="field_title"
                       formControlName="title"/>
                <div *ngIf="editForm.get('title')!.invalid && (editForm.get('title')!.dirty || editForm.get('title')!.touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('title')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                    </small>
                </div>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.description" for="field_description">Description</label>
                <textarea  type="text" class="form-control col-sm-10" name="description" id="field_description"
                       formControlName="description" rows="5">
                </textarea>
                <div *ngIf="editForm.get('description')!.invalid && (editForm.get('description')!.dirty || editForm.get('description')!.touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('description')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                    </small>
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('description')?.errors?.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 10000 }">
                    This field cannot be longer than 10000 characters.
                    </small>
                </div>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.url" for="field_url">Url</label>
                <input type="text" class="form-control col-sm-10" name="url" id="field_url"
                       formControlName="url"/>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.statut" for="field_statut">Statut</label>
                <select class="form-control col-sm-6" name="statut" formControlName="statut" id="field_statut">
                    <option value="ACTIVE">{{ 'blanatApp.StatutDeal.ACTIVE' | translate }}</option>
                    <option value="HIDDEN">{{ 'blanatApp.StatutDeal.HIDDEN' | translate }}</option>
                    <option value="EXPIRED">{{ 'blanatApp.StatutDeal.EXPIRED' | translate }}</option>
                    <option value="PENDING">{{ 'blanatApp.StatutDeal.PENDING' | translate }}</option>
                </select>
                <div *ngIf="editForm.get('statut')!.invalid && (editForm.get('statut')!.dirty || editForm.get('statut')!.touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('statut')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                    </small>
                </div>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.datePublication" for="field_datePublication">Date Publication</label>
                <input id="field_datePublication" type="text" class="form-control col-sm-6" name="datePublication" ngbDatepicker #datePublicationDp="ngbDatepicker" formControlName="datePublication"/>
                <span class="input-group-append">
                    <button type="button" class="btn btn-secondary" (click)="datePublicationDp.toggle()"><fa-icon icon="calendar-alt"></fa-icon></button>
                </span>
                <div *ngIf="editForm.get('datePublication')!.invalid && (editForm.get('datePublication')!.dirty || editForm.get('datePublication')!.touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('datePublication')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                    </small>
                </div>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.dateStart" for="field_dateStart">Date Start</label>
                <input id="field_dateStart" type="text" class="form-control col-sm-6" name="dateStart" ngbDatepicker #dateStartDp="ngbDatepicker" formControlName="dateStart"/>
                <span class="input-group-append">
                    <button type="button" class="btn btn-secondary" (click)="dateStartDp.toggle()"><fa-icon icon="calendar-alt"></fa-icon></button>
                </span>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.dateEnd" for="field_dateEnd">Date End</label>
                <input id="field_dateEnd" type="text" class="form-control col-sm-6" name="dateEnd" ngbDatepicker #dateEndDp="ngbDatepicker" formControlName="dateEnd"/>
                <span class="input-group-append">
                    <button type="button" class="btn btn-secondary" (click)="dateEndDp.toggle()"><fa-icon icon="calendar-alt"></fa-icon></button>
                </span>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.type" for="field_type">Type</label>
                <select class="form-control col-sm-6" name="type" formControlName="type" id="field_type">
                    <option value="DEAL">{{ 'blanatApp.TypeDeal.DEAL' | translate }}</option>
                    <option value="COUPON">{{ 'blanatApp.TypeDeal.COUPON' | translate }}</option>
                </select>
                <div *ngIf="editForm.get('type')!.invalid && (editForm.get('type')!.dirty || editForm.get('type')!.touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('type')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                    </small>
                </div>
            </div>
            <div class="form-group row" [hidden]="editForm.get('type').value !== 'DEAL'">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.TypeDeal.DEAL" for="field_type">Deal</label>
                <div class="col-sm-10">
                    <div class="row">
                        <div class="form-group col-sm-4">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.price" for="field_price">Price</label>
                            <input type="number" class="form-control" name="price" id="field_price"
                                   formControlName="price"/>
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.priceNormal" for="field_priceNormal">Price Normal</label>
                            <input type="number" class="form-control" name="priceNormal" id="field_priceNormal"
                                   formControlName="priceNormal"/>
                        </div>
                        <div class="form-group col-sm-4">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.priceShipping" for="field_priceShipping">Price Shipping</label>
                            <input type="number" class="form-control" name="priceShipping" id="field_priceShipping"
                                   formControlName="priceShipping"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row" [hidden]="editForm.get('type').value !== 'COUPON'">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.TypeDeal.COUPON" for="field_type">Coupon</label>
                <div class="col-sm-10">
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.coupon" for="field_coupon">Coupon</label>
                            <input type="text" class="form-control" name="coupon" id="field_coupon"
                                   formControlName="coupon"/>
                        </div>
                        <div class="form-group col-sm-6">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.couponType" for="field_couponType">Coupon Type</label>
                            <select class="form-control" name="couponType" formControlName="couponType" id="field_couponType">
                                <option value="PERCENTAGE">{{ 'blanatApp.TypeCoupon.PERCENTAGE' | translate }}</option>
                                <option value="DHS">{{ 'blanatApp.TypeCoupon.DHS' | translate }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.couponValue" for="field_couponValue">Coupon Value</label>
                            <input type="number" class="form-control" name="couponValue" id="field_couponValue"
                                   formControlName="couponValue"/>
                        </div>
                        <div class="form-group col-sm-6">
                            <label class="form-control-label" jhiTranslate="blanatApp.deal.couponPercentage" for="field_couponPercentage">Coupon Percentage</label>
                            <input type="number" class="form-control" name="couponPercentage" id="field_couponPercentage"
                                   formControlName="couponPercentage"/>
                            <div *ngIf="editForm.get('couponPercentage')!.invalid && (editForm.get('couponPercentage')!.dirty || editForm.get('couponPercentage')!.touched)">
                                <small class="form-text text-danger"
                                       *ngIf="editForm.get('couponPercentage')?.errors?.min" jhiTranslate="entity.validation.min" [translateValues]="{ min: 1 }">
                                    This field should be at least 1.
                                </small>
                                <small class="form-text text-danger"
                                       *ngIf="editForm.get('couponPercentage')?.errors?.max" jhiTranslate="entity.validation.max" [translateValues]="{ max: 100 }">
                                    This field cannot be more than 100.
                                </small>
                                <small class="form-text text-danger"
                                    [hidden]="!editForm.get('couponPercentage')?.errors?.number" jhiTranslate="entity.validation.number">
                                    This field should be a number.
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-2" jhiTranslate="blanatApp.deal.dealCategory" for="field_dealCategories">Deal Category</label>
                <select class="form-control col-sm-10" id="field_dealCategories" multiple name="dealCategories" formControlName="dealCategories">
                    <option [ngValue]="getSelected(editForm.get('dealCategories')!.value, dealCategoryOption)" *ngFor="let dealCategoryOption of dealcategories; trackBy: trackById">{{ dealCategoryOption.name }}</option>
                </select>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.local" for="field_local">Local</label>
                <input type="checkbox" class="form-control col-sm-2 shadow-none" name="local" id="field_local"
                       formControlName="local"/>
                <label class="form-control-label col-sm-2 offset-sm-2" jhiTranslate="blanatApp.deal.dealLocation" for="field_dealLocation" [hidden]="!editForm.get('local').value">Deal Location</label>
                <select class="form-control col-sm-4" id="field_dealLocation" name="dealLocation" formControlName="dealLocationId" [hidden]="!editForm.get('local').value">
                    <option [ngValue]="null"></option>
                    <option [ngValue]="dealLocationOption.id" *ngFor="let dealLocationOption of deallocations; trackBy: trackById">{{ dealLocationOption.id }}</option>
                </select>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.isDeleted" for="field_isDeleted">Is Deleted</label>
                <input type="checkbox" class="form-control col-sm-2 shadow-none" name="isDeleted" id="field_isDeleted"
                       formControlName="isDeleted"/>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.isBlocked" for="field_isBlocked">Is Blocked</label>
                <input type="checkbox" class="form-control col-sm-2 shadow-none" name="isBlocked" id="field_isBlocked"
                       formControlName="isBlocked"/>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-2" jhiTranslate="blanatApp.deal.assignedTo" for="field_assignedTo">Assigned To</label>
                <select class="form-control col-sm-10" id="field_assignedTo" name="assignedTo" formControlName="assignedToId">
                    <option *ngIf="!editForm.get('assignedToId')!.value" [ngValue]="null" selected></option>
                    <option [ngValue]="dealUserOption.id" *ngFor="let dealUserOption of dealusers; trackBy: trackById">{{ dealUserOption | userPipe }}</option>
                </select>
            </div>
            <div *ngIf="editForm.get('assignedToId')!.invalid && (editForm.get('assignedToId')!.dirty || editForm.get('assignedToId')!.touched)">
                <small class="form-text text-danger"
                       *ngIf="editForm.get('assignedToId')?.errors?.required" jhiTranslate="entity.validation.required">
                    This field is required.
                </small>
            </div>
            <div class="row justify-content-end m-3">
                <div class="col align-self-end col-auto">
                    <button type="button" id="cancel-save" class="btn btn-secondary" (click)="previousState()">
                        <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                    </button>
    
                    <button type="submit" id="save-entity" [disabled]="editForm.invalid || isSaving" class="btn btn-primary">
                        <fa-icon icon="save"></fa-icon>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
                    </button>
                </div>
            </div>
        </form>
      </div>
    </div>
</div>